<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
img-src 'self' data: https://*.cdninstagram.com https://*.fbcdn.net https://i.ytimg.com;
media-src 'self' data: https://*.cdninstagram.com https://*.fbcdn.net;
style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
font-src 'self' https://fonts.gstatic.com;
script-src 'self' 'unsafe-inline' https://www.instagram.com;
connect-src 'self';
object-src 'none';
base-uri 'self';
frame-ancestors 'self';
frame-src https://www.instagram.com https://www.youtube-nocookie.com https://www.youtube.com;
form-action https://formspree.io;">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), camera=(), microphone=(), payment=(), accelerometer=(), gyroscope=(), usb=()">
  <title>Gallery — Bámbula Studio LLC</title>
  <meta name="description" content="Photo and video gallery from Bámbula Studio: clases, talleres y comunidad." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Source+Serif+4:opsz,wght@8..60,400;8..60,700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
  <script>
    // Very small lightbox using <dialog>
    document.addEventListener('DOMContentLoaded', () => {
      const dlg = document.getElementById('lightbox');
      document.querySelectorAll('[data-lightbox]').forEach(el => {
        el.addEventListener('click', e => {
          e.preventDefault();
          const type = el.dataset.type;
          const src = el.getAttribute('href');

          const box = dlg.querySelector('.box');
          box.innerHTML = '';
          if (type === 'youtube') {
            const iframe = document.createElement('iframe');
            // The link's href carries the YouTube VIDEO ID (e.g., dQw4w9WgXcQ)
            const id = src;
            iframe.src = `https://www.youtube-nocookie.com/embed/${id}?rel=0&modestbranding=1&playsinline=1`;
            iframe.setAttribute('title', 'YouTube video player');
            iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
            iframe.setAttribute('allowfullscreen', '');
            iframe.style.width = 'min(100vw, 1200px)';
            iframe.style.height = 'min(80vh, 67.5vw)'; // 16:9 within viewport
            box.appendChild(iframe);
          } else if (type === 'video') {
            const v = document.createElement('video');
            v.setAttribute('controls', '');
            v.setAttribute('playsinline', '');
            v.setAttribute('preload', 'metadata');
            // Use the tile's thumbnail as the poster image, if present
            const thumb = el.querySelector('img')?.getAttribute('src');
            if (thumb) v.setAttribute('poster', thumb);

            // Primary MP4 source from the link's href
            if (src) {
              const s1 = document.createElement('source');
              s1.src = src;
              s1.type = 'video/mp4';
              v.appendChild(s1);
            }
            // Optional MOV fallback from data-mov attribute
            const mov = el.dataset.mov;
            if (mov) {
              const s2 = document.createElement('source');
              s2.src = mov;
              s2.type = 'video/quicktime';
              v.appendChild(s2);
            }

            v.style.maxWidth = 'min(100vw, 1200px)';
            v.style.maxHeight = '80vh';
            box.appendChild(v);
          } else {
            const img = document.createElement('img');
            img.src = src;
            img.alt = el.querySelector('img')?.alt || '';
            img.style.maxWidth = 'min(100vw, 1200px)';
            img.style.maxHeight = '80vh';
            box.appendChild(img);
          }
          dlg.showModal();
        });
      });
      dlg.addEventListener('click', (e) => {
        const rect = dlg.querySelector('.box').getBoundingClientRect();
        if (e.clientX < rect.left || e.clientX > rect.right ||
            e.clientY < rect.top  || e.clientY > rect.bottom) dlg.close();
      });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') dlg.close(); });
    });
  </script>
  <style>
    /* Page-specific tiny helpers (reuses your site styles for layout) */
    .gallery-hero { padding: 3rem 0 1rem; }
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 14px;
      align-items: start;
    }
    .tile {
      position: relative;
      overflow: hidden;
      border-radius: 10px;
      background: #f6f6f6;
      box-shadow: 0 1px 2px rgba(0,0,0,.06);
    }
    .tile img, .tile video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .tile .badge {
      position: absolute;
      top: 8px; right: 8px;
      font-size: .75rem;
      background: rgba(0,0,0,.65);
      color: #fff;
      padding: 2px 6px;
      border-radius: 6px;
      letter-spacing: .02em;
    }
    dialog#lightbox {
      border: none; padding: 0; background: transparent;
      max-width: none; width: auto;
    }
    dialog#lightbox::backdrop { background: rgba(0,0,0,.6); }
    #lightbox .box {
      margin: 0 auto; background: white; border-radius: 12px; padding: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .tile--embed { display: block; background: #000; aspect-ratio: 9 / 16; }
    .tile--embed iframe { width: 100%; height: 100%; }
  </style>
</head>
<body>
  <!-- Header (simple, links back home) -->
  <header class="site-header">
    <div class="container">
      <div class="brand">
        <a href="index.html" aria-label="Bámbula Studio home">
          <img src="assets/bambula_primarylogo.png" alt="Bámbula Studio logo" class="logo logo--blend">
        </a>
      </div>
      <nav id="siteNav" class="nav">
        <a href="index.html#about">About</a>
        <a href="index.html#classes">Classes</a>
        <!-- <a href="index.html#workshops">Workshops</a> -->
        <a href="gallery.html" aria-current="page">Gallery</a>
        <a href="index.html#faq">FAQ</a>
        <a href="index.html#contact" class="btn btn--small">Contact</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="section gallery-hero">
      <div class="container">
        <h1>Gallery</h1>
        <p class="lead">Photos and videos from classes, workshops, and community. Tap any item to enlarge.</p>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <!-- TIP: put files in assets/gallery/ -->
        <div class="gallery-grid">
          <!-- IMAGE TILE -->
          <!-- <a class="tile" href="assets/gallery/bambula_01.jpg" data-lightbox data-type="image">
            <img src="assets/gallery/thumbs/bambula_01.jpg" alt="Buleo practice session" loading="lazy">
          </a> -->

            <a class="tile" href="9ic0NJBn-MQ"
                data-lightbox data-type="youtube" aria-label="Play YouTube video">
                <img src="https://i.ytimg.com/vi/9ic0NJBn-MQ/hqdefault.jpg"
                alt="YouTube thumbnail" loading="lazy">
                <span class="badge">YouTube</span>
            </a>

            <a class="tile" href="BZ2WlQRrDQk"
                data-lightbox data-type="youtube" aria-label="Play YouTube video">
                <img src="https://i.ytimg.com/vi/BZ2WlQRrDQk/hqdefault.jpg"
                alt="YouTube thumbnail" loading="lazy">
                <span class="badge">YouTube</span>
            </a>

            <!-- VIDEO TILE (MP4 hosted under assets/) -->
          <!-- <a class="tile" href="assets/gallery/yuba_fesitval_claridad_2022.mp4" data-lightbox data-type="video" aria-label="Play video">
            <img src="assets/gallery/thumbs/bambula_clip_01.jpg" alt="Video: performance" loading="lazy">
            <span class="badge">Video</span>
          </a> -->

          <!-- More examples (duplicate and change file names) -->
          <!-- <a class="tile" href="assets/gallery/bambula_02.jpg" data-lightbox data-type="image">
            <img src="assets/gallery/thumbs/bambula_02.jpg" alt="Class photo" loading="lazy">
          </a> -->

          <!-- <a class="tile" href="assets/gallery/logo_video.mp4" data-lightbox data-type="video" aria-label="Play video">
            <img src="assets/gallery/thumbs/logo_video.png" alt="Buleo practice session" loading="lazy">
            <span class="badge">Video</span>
          </a> -->

          <!-- YOUTUBE TILE (uses video ID in href) -->
          <!-- Example: href="dQw4w9WgXcQ" will open the lightbox with a privacy-enhanced YouTube embed -->
          <!--
          <a class="tile" href="YOUTUBE_VIDEO_ID" data-lightbox data-type="youtube" aria-label="Play YouTube video">
            <img src="https://i.ytimg.com/vi/YOUTUBE_VIDEO_ID/hqdefault.jpg" alt="YouTube thumbnail" loading="lazy">
            <span class="badge">YouTube</span>
          </a>
          -->

          <!-- INSTAGRAM EMBED (Reel/Post) — requires public post and CSP allowances -->
          <!-- Replace REEL_URL with your public Instagram URL. Example: https://www.instagram.com/reel/XXXXXXXXX/ -->
          <!--
          <div class="tile tile--embed" aria-label="Instagram reel">
            <blockquote class="instagram-media" data-instgrm-permalink="REEL_URL" data-instgrm-version="14" style="margin:0 auto; max-width:540px; width:100%;"></blockquote>
          </div>
          -->
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>&copy; <span id="year"></span> Bámbula Studio LLC. All rights reserved.</small>
    </div>
  </footer>

  <script>
    // Year stamp
    const year = document.getElementById('year');
    if (year) year.textContent = new Date().getFullYear();
  </script>
  <script async src="https://www.instagram.com/embed.js"></script>
  <dialog id="lightbox">
    <div class="box"></div>
  </dialog>
</body>
</html>